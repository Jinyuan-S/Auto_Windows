# 项目安排 #

## 服务器地址  http://39.106.85.198/

**已经安装**

- Linux版本为centos 8

- nginx
- nodejs(10.21.0)  npm(6.14.4)

## Model Design

```js
window {
    _id, // 窗户的id
    name, // 窗户的名字，默认为Undefined
    owner, // 持有者的id, 默认为None
    device_id, // Onenet上的设备id
    api_key, // Onenet上的apikey
    direciton, // 朝向 默认为None
    auto: true/false // 窗户是否处于托管状态
    open: true/false // 窗户是否处于开启状态
    // 后续可添加其他状态
}
condition {
    air_quality: {
        AQI, // 空气质量
        PM25, 
        PM10,
        O3,
        NO2,
        SO2,
        CO
    },
    weather: {
        rain_fall, // 降雨
        wind_direction, // 风向
        wind_speed, // 风速
        RH, // 室外湿度
        TEM // 室外温度
    },
    indoor: {
        O2, // 含氧量
        RH, // 室内湿度
        TEM // 室内温度
    }
}
user {
    _id, 
    name, 
    windows: [_id1, _id2, ...], 
    Preference: {
        rain, // 对降雨敏感
        wind, // 对风敏感
        AQI, // 对空气质量敏感
        RH, // 对湿度敏感
        O2, // 对含氧量敏感
        TEM // 对温度敏感
    }
}
```

## 第四周 ##

1. 进行项目讨论

## 第五周 ##

### 微信小程序 ###

1. 能实现用户手动控制开关窗（一键开关）
2. 能实现用户信息的采集（希望几点到几点开窗、室内面积、窗户朝向、）
3. 有天气接口，能在程序内显示实时天气和明日天气预报

接口：

1. 天气接口，从服务器获取天气信息。
2. 用户信息接口，登录时获取用户信息，并且支持修改用户信息（房屋面积，窗户朝向，自定义开关窗时间，设置开窗大小等）
3. 操作接口，直接通过服务器控制，一键开窗和一键关窗
4. 意见与反馈接口，向服务器发送反馈。
5. （开关窗时自动在微信内提醒）



### 后端 ###

1. 用户管理
2. 自动根据用户设定向服务端发送开关窗指令



### 硬件端 ###

1. 控制舵机开关窗
2. 返回状态

接口：

1. 指令接口：接受服务器发送的开关窗指令，返回状态
2. 状态接口：是否机械故障，当前电量，网络状态，时钟校准，固件版本号（自动从服务器获取更新）